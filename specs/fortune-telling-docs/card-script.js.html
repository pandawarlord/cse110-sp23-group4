<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: card-script.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: card-script.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* TODO: The scope of these variables may be adjusted later */

/**
 * A reference to the number of cards the user wants to select
 * @type {int}
 */
let selectCount;

/**
 * Set the number of cards to appear to be 6
 * @type {int}
 */
let cardCount = 6;

/**
 * A reference to a button to get the tarot card predictions
 * @type {HTMLElement | null}
 */
const predictButton = document.getElementById('getTarot');

/**
 * Array containing the id strings of all selected cards
 * @type {string[]}
 */
let selectBuffer = [];

/**
 * A reference to back button HTMlElement on card-prototype.html
 * @type {HTMLElement | null}
 */
const returnToMenuButton = document.getElementById('returnMenu');

/**
 * A reference to all card images 
 * @type {HTMLCollection&lt;img> | null}
 */
const tarotCards = document.getElementsByClassName('card');

window.addEventListener('load', init);

/**
 * Function containing all intial setup functions for generating cards 
 * and event listeners for the buttons on the page
 */
function init() {
  for (let i = 0; i &lt; tarotCards.length; i++) {
    tarotCards[i].addEventListener("click", function () { chooseCard(i); });
  }

  /* Get category from local storage */
  let category = JSON.parse(localStorage.getItem("category"));

  /* Set selectCount value from category */
  switch (category) {
    case "School":
      selectCount = 3;
      break;
    case "Love":
    case "Life":
    default:
      selectCount = 1;
      break;
  }

  /* Add event listener for predicting fortune button */
  predictButton.addEventListener("click", generatePrediction);

  /* Add event listener for return to menu button to go back to menu page */
  returnToMenuButton.addEventListener("click", returnToMenu);
}

function returnToMenu() {
  window.location.href = "menu-prototype.html";
}

/**
 * A function used for an event listener in order to generate the prediction
 * when the user has selected their cards
 */
function generatePrediction() {
  /* 
   * TODO: Write out the actual predictions and maybe make the prediction 
   * algorithm smarter instead of PRNG 
   */
  
  /**
   * Array containing the strings of the responses from the tarot cards
   * @type {string[]}
   */
  const numbers = ["1","2","3","4","5","6","7","8","9","10"];

  /**
   * A reference to the output area for the result of the reading
   * @type {HTMLElement | null}
   */
  const predictOut = document.getElementById('output');

  /* Verify items are selected */
  if (selectBuffer &amp;&amp; selectBuffer.length === selectCount) {
    /* Get a random fortune */
    res = Math.floor(Math.random() * cardCount);

    /**
     * String used for storing the output of the prediction
     * @type {string}
     */
    let outputContent = "";

    /* Add selected cards to output */
    for (let i = 0; i &lt; selectBuffer.length; i++)
      outputContent += `${tarotCards[selectBuffer[i]].id} `;

    /* Give the user a prediction */
    predictOut.innerHTML = `&lt;p>You selected the following: ${outputContent}&lt;br>Here is a random number: ${numbers[res % selectBuffer.length]}&lt;/p>`;
  } else {
    /* Display a message that the user selected nothing */
    predictOut.innerHTML = `&lt;p>You did not select anything stupid!&lt;p>`;
  }
}

function chooseCard (i) {
  const index = selectBuffer.indexOf(i);
  if (index == -1) {
    selectBuffer.push(i);
    tarotCards[i].style.boxShadow = "0 0 10px 5px #ff0000";

    if (selectBuffer.length > selectCount) {
      tarotCards[selectBuffer[0]].style.boxShadow = null;
      selectBuffer.shift();
    }

  } else {
    tarotCards[i].style.boxShadow = null;

    selectBuffer.splice(index, 1);
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#backButton">backButton</a></li><li><a href="global.html#cardCount">cardCount</a></li><li><a href="global.html#categories">categories</a></li><li><a href="global.html#createPanels">createPanels</a></li><li><a href="global.html#generatePrediction">generatePrediction</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#predictButton">predictButton</a></li><li><a href="global.html#returnToMenuButton">returnToMenuButton</a></li><li><a href="global.html#savedReadingsButton">savedReadingsButton</a></li><li><a href="global.html#selectBuffer">selectBuffer</a></li><li><a href="global.html#selectCount">selectCount</a></li><li><a href="global.html#setCardLink">setCardLink</a></li><li><a href="global.html#setLandingLink">setLandingLink</a></li><li><a href="global.html#setSavedReadingsLink">setSavedReadingsLink</a></li><li><a href="global.html#tarotCards">tarotCards</a></li><li><a href="global.html#titles">titles</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri May 26 2023 16:02:14 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
